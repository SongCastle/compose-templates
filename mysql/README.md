# MySQL

Docker Compose for MySQL

# Getting Started

```sh
% cp .env.sample .env
% cp password.txt.sample password.txt
% docker compose up -d
% docker compose exec mysql bash

# mysql cli 起動
% mysql -u "$MYSQL_USER" -p
```

### ユーザ一覧 (root のみ)

```
mysql> SELECT `User`, `Host` from `mysql`.`user`;
+-----------+------------------+
| Host      | User             |
+-----------+------------------+
| %         | app              |
| %         | root             |
| localhost | mysql.infoschema |
| localhost | mysql.session    |
| localhost | mysql.sys        |
| localhost | root             |
+-----------+------------------+
6 rows in set (0.00 sec)
```

### データベース一覧

```
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| custom             |
| dev                |
| information_schema |
| performance_schema |
+--------------------+
4 rows in set (0.00 sec)
```

### データベース切替

```
mysql> use dev;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
```

### テーブル一覧

```
mysql> show tables;
+------------------+
| Tables_in_custom |
+------------------+
| serial_ids       |
| uuid_ids         |
+------------------+
2 rows in set (0.01 sec)
```

### テーブル詳細

```
mysql> show create table `dev`.`serial_ids`;
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table      | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                      |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| serial_ids | CREATE TABLE `serial_ids` (
  `id` bigint unsigned NOT NULL AUTO_INCREMENT COMMENT '主キー',
  `title` varchar(24) COLLATE utf8mb4_bin NOT NULL COMMENT 'タイトル',
  `created_at` timestamp NOT NULL COMMENT '作成日時',
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='シーケンシャルな主キーを持つテーブル' |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
```

```
mysql> show create table `custom`.`serial_ids`;
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table      | Create Table                                                                                                                                                                                                                                                                                                                                                                                                                      |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| serial_ids | CREATE TABLE `serial_ids` (
  `id` bigint unsigned NOT NULL AUTO_INCREMENT COMMENT '主キー',
  `title` varchar(24) COLLATE utf8mb4_bin NOT NULL COMMENT 'タイトル',
  `created_at` timestamp NOT NULL COMMENT '作成日時',
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin COMMENT='シーケンシャルな主キーを持つテーブル' |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
```
